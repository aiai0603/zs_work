栈帧下标从0开始
 |
 v
[ ]{0:LDARGS}
[ 5 ]{1:CALL 1 5}
[ 4 -999 5 ]{5:INCSP 1}      int r;
[ 4 -999 5 0 ]{7:GETBP}
[ 4 -999 5 0 2 ]{8:CSTI 1} 
[ 4 -999 5 0 2 1 ]{10:ADD}
[ 4 -999 5 0 3 ]{11:GETBP}
[ 4 -999 5 0 3 2 ]{12:CSTI 0}
[ 4 -999 5 0 3 2 0 ]{14:ADD}
[ 4 -999 5 0 3 2 ]{15:LDI}     r=n；
[ 4 -999 5 0 3 5 ]{16:STI}
[ 4 -999 5 5 5 ]{17:INCSP -1}
[ 4 -999 5 5 ]{19:INCSP 1}     int r;
[ 4 -999 5 5 5 ]{21:GETBP}
[ 4 -999 5 5 5 2 ]{22:CSTI 0}
[ 4 -999 5 5 5 2 0 ]{24:ADD}
[ 4 -999 5 5 5 2 ]{25:LDI}     square n 
[ 4 -999 5 5 5 5 ]{26:GETBP}
[ 4 -999 5 5 5 5 2 ]{27:CSTI 2}
[ 4 -999 5 5 5 5 2 2 ]{29:ADD}   square &r
[ 4 -999 5 5 5 5 4 ]{30:CALL 2 57}   call square
[ 4 -999 5 5 5 33 2 5 4 ]{57:GETBP}       
[ 4 -999 5 5 5 33 2 5 4 7 ]{58:CSTI 1}
[ 4 -999 5 5 5 33 2 5 4 7 1 ]{60:ADD}
[ 4 -999 5 5 5 33 2 5 4 8 ]{61:LDI}      
[ 4 -999 5 5 5 33 2 5 4 4 ]{62:GETBP}
[ 4 -999 5 5 5 33 2 5 4 4 7 ]{63:CSTI 0}
[ 4 -999 5 5 5 33 2 5 4 4 7 0 ]{65:ADD}
[ 4 -999 5 5 5 33 2 5 4 4 7 ]{66:LDI}
[ 4 -999 5 5 5 33 2 5 4 4 5 ]{67:GETBP}
[ 4 -999 5 5 5 33 2 5 4 4 5 7 ]{68:CSTI 0}
[ 4 -999 5 5 5 33 2 5 4 4 5 7 0 ]{70:ADD}
[ 4 -999 5 5 5 33 2 5 4 4 5 7 ]{71:LDI}      i = 5入栈
[ 4 -999 5 5 5 33 2 5 4 4 5 5 ]{72:MUL}    做平方
[ 4 -999 5 5 5 33 2 5 4 4 25 ]{73:STI}
[ 4 -999 5 5 25 33 2 5 4 25 ]{74:INCSP -1}   
[ 4 -999 5 5 25 33 2 5 4 ]{76:INCSP 0}
[ 4 -999 5 5 25 33 2 5 4 ]{78:RET 1}   返回值
[ 4 -999 5 5 25 4 ]{33:INCSP -1}
[ 4 -999 5 5 25 ]{35:GETBP}
[ 4 -999 5 5 25 2 ]{36:CSTI 2}
[ 4 -999 5 5 25 2 2 ]{38:ADD}
[ 4 -999 5 5 25 4 ]{39:LDI}
[ 4 -999 5 5 25 25 ]{40:PRINTI}    输出
25 [ 4 -999 5 5 25 25 ]{41:INCSP -1}
[ 4 -999 5 5 25 ]{43:INCSP -1}
[ 4 -999 5 5 ]{45:GETBP}
[ 4 -999 5 5 2 ]{46:CSTI 1}
[ 4 -999 5 5 2 1 ]{48:ADD}
[ 4 -999 5 5 3 ]{49:LDI}
[ 4 -999 5 5 5 ]{50:PRINTI}    输出
5 [ 4 -999 5 5 5 ]{51:INCSP -1}
[ 4 -999 5 5 ]{53:INCSP -1}
[ 4 -999 5 ]{55:RET 0}
[ 5 ]{4:STOP