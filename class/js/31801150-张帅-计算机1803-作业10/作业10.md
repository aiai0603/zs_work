

# [2020-2021å­¦å¹´ç¬¬2å­¦æœŸ](https://sigcc.gitee.io/xplatform/#/lab/10/lab10.event?id=_2020-2021å­¦å¹´ç¬¬2å­¦æœŸ)

# [**å® éªŒ æŠ¥ å‘Š**](https://sigcc.gitee.io/xplatform/#/lab/10/lab10.event?id=å®-éªŒ-æŠ¥-å‘Š)

![zucc](https://sigcc.gitee.io/xplatform/zucc.png)

- è¯¾ç¨‹åç§°:è·¨å¹³å°è„šæœ¬å¼€å‘æŠ€æœ¯
- å®éªŒé¡¹ç›®:DOM äº‹ä»¶
- ä¸“ä¸šç­çº§__è®¡ç®—æœº1803_
- å­¦ç”Ÿå­¦å·__31801150_
- å­¦ç”Ÿå§“å__å¼ å¸…_
- å®éªŒæŒ‡å¯¼æ•™å¸ˆ:éƒ­é¸£

## [å®éªŒå†…å®¹](https://sigcc.gitee.io/xplatform/#/lab/10/lab10.event?id=å®éªŒå†…å®¹)

1. é˜…è¯»[è¯¾æœ¬](http://sigcc.gitee.io/eloquent-js-3e-zh/#/15?id=åäº”ã€å¤„ç†äº‹ä»¶)ç›¸å…³å†…å®¹ å›ç­”ç†è§£ä»¥ä¸‹é—®é¢˜ (ç½‘ç«™æ˜¯15ç« ï¼Œæ•™ææ˜¯14ç« ï¼Œä»¥ä¸‹ä»¥æ•™æä¸ºå‡†)

   - 15.1 è¯·è¯´æ˜`addEventListener("click",function(){} )` ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨

     ç¬¬ä¸€ä¸ªå‚æ•°eventï¼Œå­—ç¬¦ä¸²ï¼ŒæŒ‡å®šäº‹ä»¶åã€‚

     ç¬¬äºŒä¸ªå‚æ•°functionï¼Œå¿…é¡»ï¼ŒæŒ‡å®šè¦äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚

     

   - 15.2 å¦‚ä½•åæ³¨å†Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚

     `removeEventListener`æ–¹æ³•å°†åˆ é™¤ä¸€ä¸ªå¤„ç†å™¨ï¼Œä½¿ç”¨ç±»ä¼¼äº`addEventListener`çš„å‚æ•°è°ƒç”¨ã€‚

     èµ‹äºˆ`removeEventListener`çš„å‡½æ•°å¿…é¡»æ˜¯èµ‹äºˆ`addEventListener`çš„å®Œå…¨ç›¸åŒçš„å‡½æ•°å€¼ã€‚ å› æ­¤ï¼Œè¦æ³¨é”€ä¸€ä¸ªå¤„ç†å…¶ï¼Œæ‚¨éœ€è¦ä¸ºè¯¥å‡½æ•°æä¾›ä¸€ä¸ªåç§°ï¼Œä»¥ä¾¿èƒ½å¤Ÿå°†ç›¸åŒçš„å‡½æ•°å€¼ä¼ é€’ç»™è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚

     

   - 15.3 äº‹ä»¶ `Event Object event.which envent.type`çš„ä½œç”¨

     1.äº‹ä»¶å¤„ç†å™¨å‡½æ•°ä½œä¸ºå¯¹è±¡ä¼ é€’ï¼šäº‹ä»¶ï¼ˆEventï¼‰å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡æŒæœ‰äº‹ä»¶çš„é¢å¤–ä¿¡æ¯

     2.event.which å±æ€§è¿”å›[onkeypress](https://www.runoob.com/jsref/event-onkeypress.html)äº‹ä»¶è§¦å‘çš„é”®çš„å€¼çš„å­—ç¬¦ä»£ç ï¼Œæˆ–è€… [onkeydown](https://www.runoob.com/jsref/event-onkeydown.html) æˆ– [onkeyup](https://www.runoob.com/jsref/event-onkeyup.html) äº‹ä»¶çš„é”®çš„ä»£ç ã€‚

     ä¸¤ç§ä»£ç ç±»å‹çš„åŒºåˆ«æ˜¯:

     - å­—ç¬¦ä»£ç  - è¡¨ç¤º ASCII å­—ç¬¦çš„æ•°å­—
     - é”®ç›˜ä»£ç  - è¡¨ç¤ºé”®ç›˜ä¸ŠçœŸå®é”®çš„æ•°å­—

     3.å¯¹è±¡çš„`type`å±æ€§ä¸€èˆ¬æŒæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå½“å‰ Event å¯¹è±¡è¡¨ç¤ºçš„äº‹ä»¶çš„åç§°ã€‚

     

   - 15.4 è¯·è¯´æ˜äº‹ä»¶æ•è·çš„è¿‡ç¨‹

     å¯¹äºå¤§å¤šæ•°äº‹ä»¶ç±»å‹ï¼Œåœ¨å…·æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ä¸Šæ³¨å†Œçš„å¤„ç†å™¨ï¼Œä¹Ÿå°†æ¥æ”¶å‘ç”Ÿåœ¨å­èŠ‚ç‚¹ä¸­çš„äº‹ä»¶ã€‚è‹¥ç‚¹å‡»ä¸€ä¸ªæ®µè½ä¸­çš„æŒ‰é’®ï¼Œæ®µè½çš„äº‹ä»¶å¤„ç†å™¨ä¹Ÿä¼šæ”¶åˆ°ç‚¹å‡»äº‹ä»¶ã€‚

     ä½†è‹¥æ®µè½å’ŒæŒ‰é’®éƒ½æœ‰äº‹ä»¶å¤„ç†å™¨ï¼Œåˆ™å…ˆæ‰§è¡Œæœ€ç‰¹æ®Šçš„äº‹ä»¶å¤„ç†å™¨ï¼ˆæŒ‰é’®çš„äº‹ä»¶å¤„ç†å™¨ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´äº‹ä»¶å‘å¤–ä¼ æ’­ï¼Œä»è§¦å‘äº‹ä»¶çš„èŠ‚ç‚¹åˆ°å…¶çˆ¶èŠ‚ç‚¹ï¼Œæœ€åç›´åˆ°æ–‡æ¡£æ ¹èŠ‚ç‚¹ã€‚æœ€åï¼Œå½“æŸä¸ªç‰¹å®šèŠ‚ç‚¹ä¸Šæ³¨å†Œçš„æ‰€æœ‰äº‹ä»¶å¤„ç†å™¨æŒ‰å…¶é¡ºåºå…¨éƒ¨æ‰§è¡Œå®Œæ¯•åï¼Œçª—å£å¯¹è±¡çš„äº‹ä»¶å¤„ç†å™¨æ‰æœ‰æœºä¼šå“åº”äº‹ä»¶ã€‚

     - å¦‚æœçˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹çš„åŒåäº‹ä»¶ï¼Œé‚£ä¸ªå…ˆè¢«å¤„ç†

       å­èŠ‚ç‚¹å…ˆå¤„ç†ã€‚äº‹ä»¶å‘å¤–ä¼ æ’­ï¼Œä»è§¦å‘äº‹ä»¶çš„èŠ‚ç‚¹åˆ°å…¶çˆ¶èŠ‚ç‚¹ï¼Œæœ€åç›´åˆ°æ–‡æ¡£æ ¹èŠ‚ç‚¹.

     - `event.stopPropagation()`å‡½æ•°çš„ä½œç”¨

       äº‹ä»¶å¤„ç†å™¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥è°ƒç”¨äº‹ä»¶å¯¹è±¡çš„`stopPropagation`æ–¹æ³•ï¼Œé˜»æ­¢äº‹ä»¶è¿›ä¸€æ­¥ä¼ æ’­

     - `event.target`å±æ€§çš„ä½œç”¨

       å¤§å¤šæ•°äº‹ä»¶å¯¹è±¡éƒ½æœ‰`target`å±æ€§ï¼ŒæŒ‡çš„æ˜¯äº‹ä»¶æ¥æºèŠ‚ç‚¹ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨`target`å±æ€§æ¥åˆ›å»ºå‡ºç‰¹å®šç±»å‹äº‹ä»¶çš„å¤„ç†ç½‘ç»œã€‚

       

   - 15.5 ä¸¾ä¾‹è¯´æ˜`event.preventDefault()`å‡½æ•°çš„ä½œç”¨

     å¤§å¤šæ•°äº‹ä»¶éƒ½æœ‰ä¸å…¶å…³è”çš„é»˜è®¤åŠ¨ä½œã€‚è‹¥ç‚¹å‡»é“¾æ¥ï¼Œå°±ä¼šè·³è½¬åˆ°é“¾æ¥ç›®æ ‡ã€‚è‹¥ç‚¹å‡»å‘ä¸‹çš„ç®­å¤´ï¼Œæµè§ˆå™¨ä¼šå‘ä¸‹ç¿»é¡µã€‚è‹¥å³å‡»é¼ æ ‡ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªä¸Šä¸‹æ–‡èœå•ç­‰ã€‚

     å¯¹äºå¤§å¤šæ•°ç±»å‹çš„äº‹ä»¶ï¼ŒJavaScript äº‹ä»¶å¤„ç†å™¨ä¼šåœ¨é»˜è®¤è¡Œä¸ºå‘ç”Ÿä¹‹å‰è°ƒç”¨ã€‚è‹¥äº‹ä»¶å¤„ç†å™¨ä¸å¸Œæœ›æ‰§è¡Œé»˜è®¤è¡Œä¸ºï¼ˆé€šå¸¸æ˜¯å› ä¸ºå·²ç»å¤„ç†äº†è¯¥äº‹ä»¶ï¼‰ï¼Œä¼šè°ƒç”¨`preventDefault`äº‹ä»¶å¯¹è±¡çš„æ–¹æ³•ã€‚

     ä½ å¯ä»¥å®ç°ä½ è‡ªå·±çš„é”®ç›˜å¿«æ·é”®æˆ–äº¤äº’å¼èœå•ã€‚ä½ ä¹Ÿå¯ä»¥å¹²æ‰°ç”¨æˆ·æœŸæœ›çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œå®ç°ä¸€ä¸ªæ— æ³•è·³è½¬çš„é“¾æ¥ã€‚

     ```js
     <a href="https://developer.mozilla.org/">MDN</a>
     <script>
       let link = document.querySelector("a");
       link.addEventListener("click", event => {
         console.log("Nope.");
         event.preventDefault();
       });
     </script>
     ```

     

   - 15.6 `keydown,keyup,keypress`äº‹ä»¶çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Œeventå¯¹è±¡ä¸Šçš„ `event.keyCode event.ctrlKey event.charCode`å±æ€§æœ‰å“ªäº›ä½œç”¨

     

     1.å½“æŒ‰ä¸‹é”®ç›˜ä¸Šçš„æŒ‰é”®æ—¶ï¼Œæµè§ˆå™¨ä¼šè§¦å‘`"keydown"`äº‹ä»¶ã€‚å½“æ¾å¼€æŒ‰é”®æ—¶ï¼Œä¼šè§¦å‘`"keyup"`äº‹ä»¶ã€‚

     éå­—ç¬¦é”®ä¸ä¼šå¼•å‘ KeyPress äº‹ä»¶ï¼Œä½†éå­—ç¬¦é”®å´å¯ä»¥å¼•å‘ KeyDown å’Œ KeyUp äº‹ä»¶ã€‚

     KeyDown å’Œ KeyPress äº‹ä»¶åœ¨æŒ‰ä¸‹é”®æ—¶å‘ç”Ÿï¼ŒKeyUp äº‹ä»¶åœ¨é‡Šæ”¾é”®æ—¶å‘ç”Ÿã€‚

     2.keyCode å±æ€§è¿”å›[onkeypress](https://www.runoob.com/jsref/event-onkeypress.html)äº‹ä»¶è§¦å‘çš„é”®çš„å€¼çš„å­—ç¬¦ä»£ç ï¼Œæˆ–è€… [onkeydown](https://www.runoob.com/jsref/event-onkeydown.html) æˆ– [onkeyup](https://www.runoob.com/jsref/event-onkeyup.html) äº‹ä»¶çš„é”®çš„ä»£ç ã€‚

     ä¸¤ç§ä»£ç ç±»å‹çš„åŒºåˆ«æ˜¯:

     - å­—ç¬¦ä»£ç  - è¡¨ç¤º ASCII å­—ç¬¦çš„æ•°å­—
     - é”®ç›˜ä»£ç  - è¡¨ç¤ºé”®ç›˜ä¸ŠçœŸå®é”®çš„æ•°å­—

     p>ä¸¤ç§ç±»å‹çš„å€¼ä¸æ˜¯éƒ½ç›¸ç­‰çš„ï¼Œä¾‹å¦‚å°å†™å­—ç¬¦ "w" å’Œå¤§å†™å­—ç¬¦ "W" æœ‰ç›¸åŒçš„é”®ç›˜ä»£ç ï¼Œå› ä¸ºä»–ä»¬ä»–ä»¬é”®ç›˜ä¸Š ( "W" ä»£ç ä¸º "87")ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä¸åŒçš„å­—ç¬¦ä»£ç ï¼Œä¸¤ä¸ªå­—ç¬¦è¾“å‡ºæ˜¯ä¸ä¸€æ ·çš„( "w" å’Œ "W" å­—ç¬¦ä»£ç ä¸º "119" å’Œ "87")

     3.ctrlKey äº‹ä»¶å±æ€§å¯è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒCtrl é”®æ˜¯å¦è¢«æŒ‰ä¸‹å¹¶ä¿æŒä½ã€‚

     4.charCode å±æ€§è¿”å›[onkeypress](https://www.runoob.com/jsref/event-onkeypress.html)äº‹ä»¶è§¦å‘é”®å€¼çš„å­—æ¯ä»£ç ã€‚

     Unicode å­—ç¬¦ä»£ç æ˜¯ä¸€ä¸ªå­—æ¯çš„æ•°å­— (å¦‚æ•°å­— "97" ä»£è¡¨å­—æ¯ "a")ã€‚

     

   - 15.7 `mousedown, mouseup,click`äº‹ä»¶çš„åŒºåˆ«åœ¨å“ªé‡Œ?

     mousedown

     å½“é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ–¹ï¼Œå¹¶æŒ‰ä¸‹é¼ æ ‡æŒ‰é”®ï¼ˆå·¦ã€å³é”®å‡å¯ï¼‰æ—¶ï¼Œä¼šå‘ç”Ÿ mousedown äº‹ä»¶ã€‚
     ä¸ click äº‹ä»¶ä¸åŒï¼Œmousedown äº‹ä»¶ä»…éœ€è¦æŒ‰é”®è¢«æŒ‰ä¸‹ï¼Œè€Œä¸éœ€è¦æ¾å¼€å³å¯å‘ç”Ÿã€‚

     mouseup

     å½“åœ¨å…ƒç´ ä¸Šæ¾å¼€é¼ æ ‡æŒ‰é”®ï¼ˆå·¦ã€å³é”®å‡å¯ï¼‰æ—¶ï¼Œä¼šå‘ç”Ÿ mouseup äº‹ä»¶ã€‚
     ä¸ click äº‹ä»¶ä¸åŒï¼Œmouseup äº‹ä»¶ä»…éœ€è¦æ¾å¼€æŒ‰é’®ã€‚å½“é¼ æ ‡æŒ‡é’ˆä½äºå…ƒç´ ä¸Šæ–¹æ—¶ï¼Œæ”¾æ¾é¼ æ ‡æŒ‰é’®å°±ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚

     click

     å½“é¼ æ ‡æŒ‡é’ˆåœç•™åœ¨å…ƒç´ ä¸Šæ–¹ï¼Œç„¶åæŒ‰ä¸‹å¹¶æ¾å¼€é¼ æ ‡å·¦é”®æ—¶ï¼Œå°±ä¼šå‘ç”Ÿä¸€æ¬¡ click äº‹ä»¶ã€‚
     æ³¨æ„ï¼šè§¦å‘clickäº‹ä»¶çš„æ¡ä»¶æ˜¯æŒ‰ä¸‹å¹¶æ¾å¼€é¼ æ ‡å·¦é”®ï¼ï¼ŒæŒ‰ä¸‹å¹¶æ¾å¼€é¼ æ ‡å³é”®å¹¶ä¸ä¼šè§¦å‘clickäº‹ä»¶ã€‚

     ä¸‰ä¸ªäº‹ä»¶çš„è§¦å‘é¡ºåº
     è‹¥åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸ŠæŒ‰ä¸‹å¹¶æ¾å¼€é¼ æ ‡å·¦é”®ï¼Œä¼šä¾æ¬¡è§¦å‘mousedownã€mouseupã€clickï¼Œå‰ä¸€ä¸ªäº‹ä»¶æ‰§è¡Œå®Œæ¯•æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªäº‹ä»¶
     è‹¥åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸ŠæŒ‰ä¸‹å¹¶æ¾å¼€é¼ æ ‡å³é”®ï¼Œä¼šä¾æ¬¡è§¦å‘mousedownã€mouseupï¼Œå‰ä¸€ä¸ªäº‹ä»¶æ‰§è¡Œå®Œæ¯•æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªäº‹ä»¶ï¼Œä¸ä¼šè§¦å‘clickäº‹ä»¶

     

   - 15.7 è¿è¡Œè¯¾æœ¬æ¡ˆä¾‹ï¼Œæ¼”ç¤ºæ‹–æ‹‰æ§ä»¶çš„æ•ˆæœã€‚

     ![image-20210510143614293](.\img\7.png)

     ![image-20210510143548056](.\img\6.png)

   - 15.8è¯·å­¦çš„ä¾‹å­ã€‚ç»™æ®µè½ä¸­çš„æ–‡æœ¬å®ç°æ»šåŠ¨æ¡æ•ˆæœã€‚

     ```js
     <style>
       #progress {
        width: 470px;
        height: 195px;
       }
     
       .CodeMirror-scroll {
                 overflow: auto;
                 height: 360px;
                 width: 860px;
      }
     </style>
     <textarea id="progress">
     
       <html style="color: green">
         <!-- this is a comment -->
         <head>
           <title>Mixed HTML Example</title>
           <style>
             h1 {font-family: comic sans; color: #f0f;}
             div {background: yellow !important;}
             body {
               max-width: 50em;
               margin: 1em 2em 1em 5em;
             }
           </style>
         </head>
         <body>
           <h1>Mixed HTML Example</h1>
           <script>
             function jsFunc(arg1, arg2) {
               if (arg1 && arg2) document.body.innerHTML = "achoo";
             }
           </script>
         </body>
       </html>
       
     
     
     </textarea>
     <link rel="stylesheet" href="./codemirror-5.61.0/lib/codemirror.css"/>
     <script type="text/javascript" src="./codemirror-5.61.0/lib/codemirror.js"></script>
     <script type="text/javascript" src="./codemirror-5.61.0/mode/xml/xml.js"></script>
     <script>
       editor_req = CodeMirror.fromTextArea(document.getElementById("progress"), {
             mode: "xml",
             lineNumbers: true,
             scrollbarStyle: null
      });
     </script>
     
     ```

     

     ![image-20210510162250317](.\img\10.png)

     - [æ•ˆæœå‚è€ƒcodemirror] [codemirror](http://codemirror.net/mode/htmlmixed/index.html)
     - ![img](https://sigcc.gitee.io/xplatform/lab/10/codemirror.png)

   - 15.9-10è¯·è¯´æ˜ `focus blur load beforeunload`äº‹ä»¶ã€‚

     å½“å…ƒç´ è·å¾—ç„¦ç‚¹æ—¶ï¼Œæµè§ˆå™¨ä¼šè§¦å‘å…¶ä¸Šçš„`focus`äº‹ä»¶ã€‚å½“å¤±å»ç„¦ç‚¹æ—¶ï¼Œå…ƒç´ ä¼šè·å¾—`blur`äº‹ä»¶ã€‚

     å½“ç•Œé¢ç»“æŸè£…è½½æ—¶ï¼Œä¼šè§¦å‘çª—å£å¯¹è±¡å’Œæ–‡æ¡£`body`å¯¹è±¡çš„`"load"`äº‹ä»¶ã€‚å½“é¡µé¢å…³é—­æˆ–è·³è½¬ï¼ˆæ¯”å¦‚è·³è½¬åˆ°ä¸€ä¸ªé“¾æ¥ï¼‰æ—¶ï¼Œä¼šè§¦å‘`beforeunload`äº‹ä»¶ã€‚è¯¥äº‹ä»¶ç”¨äºé˜²æ­¢ç”¨æˆ·çªç„¶å…³é—­æ–‡æ¡£è€Œä¸¢å¤±å·¥ä½œç»“æœã€‚

     

   - 15.11 ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨`Worker ï¼ŒpostMessage`æœ‰ä½•ä½œç”¨

     å¦‚æœæ‚¨æƒ³åœ¨èƒŒååšä¸€äº›è€—æ—¶çš„äº‹æƒ…è€Œä¸ä¼šå†»ç»“é¡µé¢ï¼Œæµè§ˆå™¨ä¼šæä¾›ä¸€äº›åä¸º Web Worker çš„ä¸œè¥¿ã€‚ Web Worker æ˜¯ä¸€ä¸ª JavaScript è¿‡ç¨‹ï¼Œä¸ä¸»è„šæœ¬ä¸€èµ·åœ¨è‡ªå·±çš„æ—¶é—´çº¿ä¸Šè¿è¡Œã€‚

     ä¸ºäº†é¿å…å¤šçº¿ç¨‹è§¦åŠç›¸åŒæ•°æ®çš„é—®é¢˜ï¼ŒWeb Worker ä¸ä¼šå°†å…¶å…¨å±€ä½œç”¨åŸŸæˆ–ä»»ä½•å…¶ä»–æ•°æ®ä¸ä¸»è„šæœ¬çš„ç¯å¢ƒå…±äº«ã€‚ ç›¸åï¼Œä½ å¿…é¡»é€šè¿‡æ¥å›å‘é€æ¶ˆæ¯ä¸ä»–ä»¬æ²Ÿé€šã€‚

     æ­¤ä»£ç ä¼šç”Ÿæˆä¸€ä¸ªè¿è¡Œè¯¥è„šæœ¬çš„ Web Workerï¼Œå‘å…¶å‘é€å‡ æ¡æ¶ˆæ¯å¹¶è¾“å‡ºå“åº”ã€‚

     å‡½æ•°`postMessage`ä¼šå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œè§¦å‘æ¥æ”¶æ–¹çš„`message`äº‹ä»¶ã€‚åˆ›å»ºå·¥ä½œå•å…ƒçš„è„šæœ¬é€šè¿‡`Worker`å¯¹è±¡æ”¶å‘æ¶ˆæ¯ï¼Œè€Œ`worker`åˆ™ç›´æ¥å‘å…¶å…¨å±€ä½œç”¨åŸŸå‘é€æ¶ˆæ¯ï¼Œæˆ–ç›‘å¬å…¶æ¶ˆæ¯ã€‚åªæœ‰å¯ä»¥è¡¨ç¤ºä¸º JSON çš„å€¼å¯ä»¥ä½œä¸ºæ¶ˆæ¯å‘é€ - å¦ä¸€æ–¹å°†æ¥æ”¶å®ƒä»¬çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å€¼æœ¬èº«ã€‚

     

   - 15.13 è¯·è¿è¡Œ é™é¢‘çš„ä¾‹å­ã€‚ä¿®æ”¹å‚æ•°ï¼Œæ˜¾ç¤ºç»“æœã€‚

     ![image-20210510145135584](.\img\8.png)

     

2. è¿è¡Œ[Worker](https://sigcc.gitee.io/xplatform/#/worker.zip),è¯·ä¿®æ”¹ä½ çš„`worker`,å®ç°`worker`çº¿ç¨‹ è®¡ç®—`fibonacci`æ•°.è®¡ç®—å®Œæ¯•åè¿”å›ç»“æœç»™ä¸»çº¿ç¨‹.

   - å®‰è£… `npm i -g http-server` , ç”¨`hs`è¿è¡Œæœ¬åœ°çš„ æµ‹è¯•æœåŠ¡å™¨

     ```js
     
     <script>
     
     //æ„é€ workerå¯¹è±¡
     var worker = new Worker('work.js')
     
     //å‘ worker çº¿ç¨‹ å‘é€æ¶ˆæ¯
     
     //worker.postMessage("Hello World");
     
     worker.postMessage({method: 'echo', args:6 })
     
     //æ¥å—worker çº¿ç¨‹çš„æ¶ˆæ¯
     
     worker.addEventListener('message', function(e) {
     console.log(e.data);
     }, false)
     
     </script> 
     
     //work.js
     // self æ˜¯å½“å‰workerçš„globalå¯¹è±¡
     //ç›‘å¬ çˆ¶çº¿ç¨‹çš„æ¶ˆæ¯
     
     self.addEventListener('message', function(e) {
       self.postMessage('You said: ' + e.data);
     }, false)
     
     self.onmessage = function(event) {
       var method = event.data.method;
       var args = event.data.args;
       
     function fib(args){
       if(args == 1){
         return 1;
       }else if(args == 2){
         return 1;
       }else if(args <= 0){
         return 0;
       }else{
         return fib(args-1)+fib(args-2);
       }
     }
     
     var reply = fib(args);
     
     self.postMessage({method: method, reply: reply});
     }
     ```

     

     ![image-20210510154426057](.\img\9.png)

     

     

   - æ³¨æ„ ä¿®æ”¹ `work.js`å éœ€è¦ æŒ‰ `ctrl+f5`å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨å¯¹`js`æ–‡ä»¶çš„ç¼“å­˜.å¦åˆ™`js`æ›´æ”¹ä¸ä¼šèµ·ä½œç”¨.

     

3. è¯·åˆ©ç”¨[codemirror](http://codemirror.net/mode/htmlmixed/index.html) å†™ä¸€ä¸ªç®€å•çš„JavaScript æ–‡æœ¬ç¼–è¾‘å™¨ã€‚

   ä»£ç è¯¦è§ writer

   ![image-20210511085328220](.\img\12.png)

   - [å‚è€ƒ](https://www.phodal.com/blog/lumia-editor-diy-yourself-editor/)
   - å®ç°å¦‚ä¸‹åŠŸèƒ½
     - æ‰“å¼€ï¼Œä¿å­˜ï¼Œå…³é—­æ–‡ä»¶
     - è‡ªåŠ¨å¯¹ç„¦åˆ°è¾“å…¥åŒºåŸŸ
     - é€€å‡ºå‰æç¤ºä¿å­˜
     - å®šæ—¶ä¿å­˜ 30s
     - å³é”®ä¸Šä¸‹æ–‡èœå•
     - å¿«æ·é”® Ctrl+O Ctrl+S Ctrl+Nç­‰åŠŸèƒ½
     - å›ºå®šèœå• (position: fixed)
     - é‡‡ç”¨[awesome-javascript-cn](https://github.com/jobbole/awesome-javascript-cn)çš„å…¶ä»–æ”¹è¿›

4. (é€‰åš)æŸ¥çœ‹[awesome-javascript-cn](https://github.com/jobbole/awesome-javascript-cn) [microjs](http://microjs.com/) å­¦ä¹ æŸ¥æ‰¾JavaScriptåº“

   - åœ¨ä¸Šé¢˜ä¸­ä½¿ç”¨

      

     mousetrap

      

     åº“ ç»™ä½ çš„ç¼–è¾‘å™¨æ·»åŠ å¿«æ·é”®åŠŸèƒ½

     - JavaScriptè¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹æ˜¯, å®é™…åº”ç”¨å¼€å‘éœ€è¦å¤§é‡çš„ç¬¬ä¸‰æ–¹åº“, å¯ä»¥é€šè¿‡ æ¯”è¾ƒç›¸å…³çš„åº“[libhunt](https://js.libhunt.com/)

   - å¦‚æœä¸Šé¢˜çš„ç¨‹åº éœ€è¦æ”¯æŒ æ‰‹æœº/å¹³æ¿ çš„ touch æ“ä½œ,è¯·ä½ æ¯”è¾ƒå¹¶é€‰æ‹©ç›¸å…³çš„jsåº“æ¥å®ç°æ­¤åŠŸèƒ½.

5. å®Œæˆ 15.15 1 2 3 é¢˜

   15.1ï¼š

   ```js
   <p style="font-size: 10px;">ğŸˆ</p>
   
   <script>
     let p = document.querySelector("p");
    
   
     function handleArrow(event) {
       if (event.key == "ArrowUp") {
         if (parseInt(p.style.fontSize)> 70) {
           p.textContent = "ğŸ’¥";
           document.body.removeEventListener("keydown", handleArrow);
         } else {
           p.style.fontSize = parseInt(p.style.fontSize)*1.1+'px';
           event.preventDefault();
         }
       } else if (event.key == "ArrowDown") {
         p.style.fontSize = parseInt(p.style.fontSize)*0.9+'px';
         event.preventDefault();
       }
     }
     document.body.addEventListener("keydown", handleArrow);
   </script>
   
   
   ```

   ![image-20210510134905982](.\img\1.png)

   ![image-20210510135046844](.\img\2.png)

   15.2:

   ```js
   <style>
     .trail { /* className for the trail elements */
       position: absolute;
       height: 6px; width: 6px;
       border-radius: 3px;
       background: teal;
     }
     body {
       height: 300px;
     }
   </style>
   
   <script>
   
     
         window.addEventListener("mousemove", moved);
         function moved(event) {
   
           let node = document.createElement("div");
           node.className = "trail";
           node.style.left = (event.pageX - 3) + "px";
           node.style.top = (event.pageY - 3) + "px";
           document.body.appendChild(node);
          
         }
       
    
   </script>
   
   ```

   ![image-20210510135939143](.\img\3.png)

   15.3ï¼š

   ```js
   <tab-panel>
     <div data-tabname="one">Tab one</div>
     <div data-tabname="two">Tab two</div>
     <div data-tabname="three">Tab three</div>
   </tab-panel>
   <script>
     function asTabs(node) {
       let size = node.children.length;
       for(let i=0;i<size;i++){
         let button = document.createElement("button");
         button.textContent = node.children[i].getAttribute("data-tabname");
         button.addEventListener("click", () => selectTab(button));
         node.appendChild(button);
         node.children[i].style.display = 'none'
        
       }
   
       function selectTab(button){
         let nodes = document.querySelector("tab-panel").getElementsByTagName('button');
         let divs = document.querySelector("tab-panel").getElementsByTagName('div');
         for(let i=0;i<nodes.length;i++){
          
           if(nodes[i].textContent === button.textContent){
               nodes[i].style.background = 'teal';
           }else{
               nodes[i].style.background = '';
           }
   
           if(divs[i].getAttribute("data-tabname") === button.textContent){
               divs[i].style.display = 'block';
           }else{
               divs[i].style.display = 'none';
           }
         }   
       }  
     }
     asTabs(document.querySelector("tab-panel"));
   </script>
   ```

   ![image-20210510143319162](.\img\4.png)

   ![image-20210510143339389](.\img\5.png)

   